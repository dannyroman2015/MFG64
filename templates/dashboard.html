<div class="fixed-grid  has-1-cols-mobile has-4-cols-widescreen">
  <div class="grid">

    <div class="cell">
      <div class="card">
        <header class="card-header">
          <p class="card-header-title">{{.dtype}}'s Value</p>
          <button class="card-header-icon" aria-label="more options">
            <span class="icon">
              <i class="fas fa-angle-down" aria-hidden="true"></i>
            </span>
          </button>
        </header>
        <div class="card-image">
          <figure class="image is-3by1">
            <div id="chart" class="cell">
              <canvas id="myChart"></canvas>
            </div>
          </figure>
        </div>
        <div class="card-content">
          <div class="media">

            <div class="media-content">
              <figure class="image">
                <div id="chart2" class="cell">
                  <canvas id="myChart2"></canvas>
                </div>
              </figure>
            </div>
          </div>
        </div>

        <footer class="card-footer has-background-grey-lighter">
          <a href="/dashboard/YTD" class="card-footer-item">Year</a>
          <a href="/dashboard/MTD" class="card-footer-item">Month</a>
          <a href="/dashboard/yesterday" class="card-footer-item">Yesterday</a>
          <a href="/dashboard/today" class="card-footer-item">Today</a>
        </footer>
      </div>
    </div>

    <div class="cell">
      <div id="chart4" class="box">
        <a href="/shipped" class="label">Shipped Value</a>
        <canvas id="myChart4"></canvas>
      </div>
      <div id="chart5" class="box">
        <a href="/provalue" class="label">Production Value</a>
        <canvas id="myChart5"></canvas>
      </div>
      <div class="box">
        <nav class="level is-mobile">
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-4"><a href="#">Quality</a></p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-6">From</p>
              <input  type="date" value="2024-01-01" name="qualityFrom" 
                      id="qualityFrom" class="input is-small" disabled>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-6">Claims</p>
              <p class="subtitle is-4">5</p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-6">OQC</p>
              <p class="subtitle is-4">90%</p>
            </div>
          </div>
        </nav>
      </div>
    </div>

    <div class="cell">
      <div class="box">
        <nav class="level is-mobile">
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-6"><a href="#">Customer Service</a></p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-6">OTD</p>
              <p class="subtitle is-4">76%</p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-6">SA</p>
              <p class="subtitle is-4">95%</p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-6">Backlog</p>
              <p class="subtitle is-4">1.5</p>
            </div>
          </div>
        </nav>
      </div>       
    </div>

    <div class="cell">
      <div class="box">
        <nav class="level is-mobile">
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-4"><a href="/accident">
                <img src="/static/images/s1.png" alt="">
              </a></p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-6">From</p>
              <input  type="date" value="2024-01-01" name="accidentFrom" 
                      id="accidentFrom" class="input is-small" disabled>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="title is-6">Days</p>
              <p class="subtitle is-4">{{.days}}</p>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p>
                <span id="fallicon" class="icon">
                  <i class="fa-solid fa-person-falling title is-4"></i>
                </span>
              </p>
                <span class="subtitle is-1">{{.accidents}}</span>
            </div>
          </div>
        </nav>
      </div>       
    </div>
    
    <div class="cell">
      <div id="chart3" class="cell">
        <canvas id="myChart3"></canvas>
      </div>
    </div>

  </div>
</div> 
  
<style>
  #fallicon {
    animation: animate 3s linear infinite;
  }
  @keyframes animate {
    0% {
      transform: translate(100%, -50%) rotate(40deg);
    }
    100% {
      transform: translate(0%, 100%) rotate(-50deg);
    }
  }
</style>

<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script>
  const ctx = document.getElementById('myChart');
  const ctx2 = document.getElementById('myChart2');
  const ctx3 = document.getElementById('myChart3');
  const ctx4 = document.getElementById('myChart4');
  const ctx5 = document.getElementById('myChart5');

  new Chart(ctx, {
    plugins: [ChartDataLabels],
    type: 'bar',
    data: {
      labels: ['Factory'],
      datasets: [{
        axis: 'y',
        label: 'Factory 1',
        data: [{{.factory_1}}],
        fill: false,
        backgroundColor: [
          'rgba(255, 99, 132, 0.2)',
        ],
        borderColor: [
          'rgb(255, 99, 132)',
        ],
      },
      {
        axis: 'y',
        label: 'Factory 2',
        data: [{{.factory_2}}],
        fill: false,
        backgroundColor: ['rgba(54, 162, 235, 0.2)',],
        borderColor: ['rgb(54, 162, 235']
      },
    ]
    },
      options: {
        plugins: {
          datalabels: {
            font: {
              size: 20,
            }
          }
        },
        elements: {
          point: {
            borderColor: 'red',
            radius: 15,
            backgroundColor: ['rgba(54, 162, 235, 0.2)',],
            pointStyle: 'cross'
          }
        },
        indexAxis: 'y',
        scales: {
          x: {
            stacked: true,
            grid: {display: false,},
            border: { display: false},
            ticks: {display: false}
          },
          y: {
            stacked: true,
            grid: {display: false,},
            border: { display: false},
            ticks: {display: false}
          }
        },
      },

  });

  new Chart(ctx2, {
    plugins: [ChartDataLabels],
    options: {
      plugins: {
          datalabels: {
            font: {
              size: 20,
            }
          }
        },
    }, 
    type: 'pie',
    data: {
      labels: [
        'BRAND',
        'OEM',
      ],
      datasets: [{
        label: 'USD',
        data: [{{.sumBRAND}}, {{.sumOEM}}],
        backgroundColor: [
          'rgb(255, 99, 132)',
          'rgb(54, 162, 235)',
        ],
        hoverOffset: 4
      }]
    },
  });

  new Chart(ctx3, {
    plugins: [ChartDataLabels],
    type: 'line',
    data: {
      labels: ['LY', 'YTD', 'MTD', '1', '2', '3', '4'],
      datasets: [{
        label: 'Efficiency',
        data: [94, 96, 90, 81, 92, 93, 96],
        fill: false,
        borderColor: 'rgb(75, 192, 192)',
        tension: 0.1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          max: 120
        },
      },
    },
  });

  new Chart(ctx4, {
    plugins: [ChartDataLabels],
    type: 'bar',
    data: {
      labels: {{.shipdate}},
      datasets: [{
        label: 'USD',
        data: {{.money}},
        hoverOffset: 4,
        backgroundColor: ['rgb(149, 211, 135)',],
      },]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          grid: { display: false }
        },
        x: {
          grid: { display: false }
        }
      }
    },
  });

  new Chart(ctx5, {
    plugins: [ChartDataLabels],
    type: 'bar',
    data: {
      labels: {{.dateissue}},
      datasets: [{
        label: 'USD',
        data: {{.proValue}},
        hoverOffset: 4,
        backgroundColor: ['rgb(255, 203, 0)',],
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          grid: { display: false },
        },
        x: {
          grid: { display: false },
        }
      }
    },
  });

</script>