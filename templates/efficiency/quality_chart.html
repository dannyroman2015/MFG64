<div>
  <canvas id="qualitychart"></canvas>
</div>


<script>
  const colors = {
		"M-FIN":     "#54bebe",
		"FIN-2":     "#df979e",
		"FIN-1":     "#98d1d1",
		"M-WELD":    "#badbdb",
		"UPH":       "#dedad2",
		"ASS-1":     "#e4bcad",
		"FIT-1":     "#df979e",
		"ASS-2":     "#d7658b",
		"WW-FM":     "#c80064",
		"PAC-2":     "#ffb400",
		"OBA-1":     "#d2980d",
		"WW-VN":     "#e1a692",
		"WW-RM":     "#776bcd",
		"PAC-1":     "#9080ff",
		"M-MACHINE": "#22a7f0",
	}

  new Chart(document.getElementById("qualitychart"), {
    plugins: [ChartDataLabels],
    type: 'bar',
    data: {
      labels: {{.dates}},
      datasets: [
      {{ range $key, $value := .data }}
        {
          label: {{ $key }},
          data: {{ $value }},
          backgroundColor: colors[{{$key}}],
          pointStyle: 'rect',
        },
      {{ end }}
      ]
    },
    options: {
      plugins: {
        datalabels: {
          color: 'black', align: 'center', anchor: 'center', offset: 0,
          formatter: function(value, context) {
            if (value == "0") {
              return ""
            } else {
              return value + "%"
            }
          },
        },
        legend: {
          labels: {
            usePointStyle: true,
          },
        }
      },
      responsive: true,
      scales: {
        x: {
          stacked: true,
          grid: { display: false, },
        },
        y: {
          stacked: true,
          display: false,
        }
      }
    }
  });
</script>